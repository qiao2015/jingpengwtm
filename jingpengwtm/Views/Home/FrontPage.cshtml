@model WalkingTec.Mvvm.Core.BaseVM
@using Newtonsoft.Json;

<div class="layui-row layui-col-space15" id="frontpage">
    <div class="layui-col-md12">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">快捷方式</div>
                    <div class="layui-card-body">

                        <div class="layui-carousel layadmin-carousel layadmin-shortcut">
                            <div carousel-item>
                                <ul class="layui-row layui-col-space10">
                                    <li class="layui-col-xs3">
                                        <a lay-href="_Admin/FrameworkUser/Index">
                                            <i class="layui-icon layui-icon-username"></i>
                                            <cite>用户</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a lay-href="_Admin/FrameworkRole/Index">
                                            <i class="layui-icon layui-icon-tabs"></i>
                                            <cite>角色</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a lay-href="_Admin/FrameworkMenu/Index">
                                            <i class="layui-icon layui-icon-app"></i>
                                            <cite>菜单</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a lay-href="_Admin/FrameworkGroup/Index">
                                            <i class="layui-icon layui-icon-user"></i>
                                            <cite>用户组</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a lay-href="_Admin/DataPrivilege/Index">
                                            <i class="layui-icon layui-icon-auz"></i>
                                            <cite>数据权限</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a lay-href="_Admin/ActionLog/Index">
                                            <i class="layui-icon layui-icon-console"></i>
                                            <cite>日志</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a href="javascript:void(0)" target="_self">
                                        @*<a href="/_codegen/index" target="_blank">*@

                                            <i class="layui-icon layui-icon-template-1"></i>
                                            <cite>平台</cite>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs3">
                                        <a href="javascript:void(0)" target="_self">
                                            <i class="layui-icon layui-icon-read"></i>
                                            <cite>文档</cite>
                                        </a>
                                    </li>
                                </ul>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">用户标签</div>
                    <div class="layui-card-body">

                        <div class="layui-carousel layadmin-carousel layadmin-backlog">
                            <div carousel-item>
                                <ul class="layui-row layui-col-space10">
                                    <li class="layui-col-xs6">
                                        <a href="javascript:void(0)" class="layadmin-backlog-body" target="_self">
                                            <h3>今日已注册总人数</h3>
                                            <p><cite id="githubstar"></cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs6">
                                        <a href="javascript:void(0)" class="layadmin-backlog-body" target="_self">
                                            <h3>今日已激活总标签数</h3>
                                            <p><cite id="githubfork"></cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs6">
                                        <a href="javascript:void(0)" class="layadmin-backlog-body" target="_self">
                                            <h3>昨天已注册总人数</h3>
                                            <p><cite id="githubwatch"></cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs6">
                                        <a href="" class="layadmin-backlog-body" target="_self">
                                            <h3>昨天已激活总标签数</h3>
                                            <p><cite id="githubissue"></cite></p>
                                        </a>
                                    </li>
                                </ul>
                                <ul class="layui-row layui-col-space10">
                                    <li class="layui-col-xs12">
                                        <span style="font-size:16px;line-height:50px;">谢谢~~</span>

                                        <p style="text-align:center">
                                            <a href="javascript:void(0)" target="_self"
                                               style="background-color:#eee;background-image:linear-gradient(to bottom, #fcfcfc 0, #eee 100%);background-repeat:no-repeat;border:1px solid #d5d5d5;color:#333;padding:3px 10px 3px 8px;font-size:16px;line-height:22px">
                                                <span width="20"
                                                      style="width:20px;height:20px;font-size:16px;line-height:22px;box-sizing:border-box; background-size:100% 100%; background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjQwcHgiIGhlaWdodD0iNDBweCIgdmlld0JveD0iMTIgMTIgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMTIgMTIgNDAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiMzMzMzMzMiIGQ9Ik0zMiAxMy40Yy0xMC41IDAtMTkgOC41LTE5IDE5YzAgOC40IDUuNSAxNS41IDEzIDE4YzEgMC4yIDEuMy0wLjQgMS4zLTAuOWMwLTAuNSAwLTEuNyAwLTMuMiBjLTUuMyAxLjEtNi40LTIuNi02LjQtMi42QzIwIDQxLjYgMTguOCA0MSAxOC44IDQxYy0xLjctMS4yIDAuMS0xLjEgMC4xLTEuMWMxLjkgMC4xIDIuOSAyIDIuOSAyYzEuNyAyLjkgNC41IDIuMSA1LjUgMS42IGMwLjItMS4yIDAuNy0yLjEgMS4yLTIuNmMtNC4yLTAuNS04LjctMi4xLTguNy05LjRjMC0yLjEgMC43LTMuNyAyLTUuMWMtMC4yLTAuNS0wLjgtMi40IDAuMi01YzAgMCAxLjYtMC41IDUuMiAyIGMxLjUtMC40IDMuMS0wLjcgNC44LTAuN2MxLjYgMCAzLjMgMC4yIDQuNyAwLjdjMy42LTIuNCA1LjItMiA1LjItMmMxIDIuNiAwLjQgNC42IDAuMiA1YzEuMiAxLjMgMiAzIDIgNS4xYzAgNy4zLTQuNSA4LjktOC43IDkuNCBjMC43IDAuNiAxLjMgMS43IDEuMyAzLjVjMCAyLjYgMCA0LjYgMCA1LjJjMCAwLjUgMC40IDEuMSAxLjMgMC45YzcuNS0yLjYgMTMtOS43IDEzLTE4LjFDNTEgMjEuOSA0Mi41IDEzLjQgMzIgMTMuNHoiLz48L3N2Zz4=')">&nbsp;&nbsp;&nbsp;&nbsp;</span>

                                            </a>
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-header">近7天用户标签</div>
                    <div class="layui-carousel layadmin-carousel layadmin-dataview">
                        <div carousel-item>
                            <div id="chart_Controller" style=" height:300px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*<div class="layui-col-md6">
                  <div class="layui-card">
                    <div class="layui-card-header">其他</div>
                    <div class="layui-carousel layadmin-carousel layadmin-dataview">
                      <div carousel-item>
                        <div id="chart_Other" style=" height:300px;">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>*@
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-header">模拟数据</div>
                    <div class="layui-card-body">
                        <div class="layui-carousel layadmin-carousel layadmin-dataview" data-anim="fade"
                             lay-filter="LAY-index-dataview">
                            <div carousel-item id="LAY-index-dataview">
                                <div><i class="layui-icon layui-icon-loading1 layadmin-loading"></i></div>
                                <div></div>
                                <div></div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

   

</div>
<script>
  $("#frontpage").parent().css("background-color", "#eee");
 // $.get("/Home/jingpengCount", function (r) {
 //   if (r === undefined || r === null) {
 //     return;
 //   }
 ////   $("#githubstar").html(r.stargazers_count);
 //   $("#githubstars").html(r.stargazers_count);
 ////   $("#githubfork").html(r.forks_count);
 //   $("#githubwatch").html(r.subscribers_count);
 //   $("#githubissue").html(r.open_issues_count);
 // });
    $.get("/Home/GetjingpengCount", function (r) {
        if (r === undefined || r === null) {
            return;
        }
        $("#githubstar").html(r[0].UserCount);
        $("#githubfork").html(r[0].RFIDCount);
        $("#githubwatch").html(r[1].UserCount);
        $("#githubissue").html(r[1].RFIDCount);
    });

  //区块轮播切换
  layui.use(['admin', 'carousel'], function () {
    var $ = layui.$
      , admin = layui.admin
      , carousel = layui.carousel
      , element = layui.element
      , device = layui.device();

    //轮播切换
    $('.layadmin-carousel').each(function () {
      var othis = $(this);
      carousel.render({
        elem: this
        , width: '100%'
        , arrow: 'none'
        , interval: othis.data('interval')
        , autoplay: othis.data('autoplay') === true
        , trigger: (device.ios || device.android) ? 'click' : 'hover'
        , anim: othis.data('anim')
      });
    });

    element.render('progress');

  });

  //数据概览
  layui.use(['admin', 'carousel', 'echarts'], function () {
    var $ = layui.$
      , admin = layui.admin
      , carousel = layui.carousel
      , echarts = layui.echarts;

      var control = echarts.init(document.getElementById('chart_Controller'), 'default');
      var controlOption = {
          title: { text: '' },
        tooltip: {},
         legend: {
          data: @Html.Raw(JsonConvert.SerializeObject(ViewData["controller.legend"]))
        },
       xAxis: {},
        yAxis: {
            data: ['标签', '用户']
        },
        series: @Html.Raw(JsonConvert.SerializeObject(ViewData["controller.series"]))
      };
      control.setOption(controlOption);

      @*var other = echarts.init(document.getElementById('chart_Other'), 'default');
      var otherOption = {
        title: { text: '' },
        tooltip: {},
        xAxis: {},
        yAxis: {
          data: ['模型', 'Dll文件', '数据权限', '连接字符串', 'App Settings']
        },
        series: @Html.Raw(JsonSerializer.Serialize(ViewData["other.series"]))
      };
      other.setOption(otherOption);*@

    var echartsApp = [], options = [
      //今日流量趋势
      {
        title: {
          text: '今日流量趋势',
          x: 'center',
          textStyle: {
            fontSize: 14
          }
        },
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['', '']
        },
        xAxis: [{
          type: 'category',
          boundaryGap: false,
          data: ['06:00', '06:30', '07:00', '07:30', '08:00', '08:30', '09:00', '09:30', '10:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00', '16:30', '17:00', '17:30', '18:00', '18:30', '19:00', '19:30', '20:00', '20:30', '21:00', '21:30', '22:00', '22:30', '23:00', '23:30']
        }],
        yAxis: [{
          type: 'value'
        }],
        series: [{
          name: 'PV',
          type: 'line',
          smooth: true,
          itemStyle: { normal: { areaStyle: { type: 'default' } } },
          data: [111, 222, 333, 444, 555, 666, 3333, 33333, 55555, 66666, 33333, 3333, 6666, 11888, 26666, 38888, 56666, 42222, 39999, 28888, 17777, 9666, 6555, 5555, 3333, 2222, 3111, 6999, 5888, 2777, 1666, 999, 888, 777]
        }, {
          name: 'UV',
          type: 'line',
          smooth: true,
          itemStyle: { normal: { areaStyle: { type: 'default' } } },
          data: [11, 22, 33, 44, 55, 66, 333, 3333, 5555, 12666, 3333, 333, 666, 1188, 2666, 3888, 6666, 4222, 3999, 2888, 1777, 966, 655, 555, 333, 222, 311, 699, 588, 277, 166, 99, 88, 77]
        }]
      },

      //访客浏览器分布
      {
        title: {
          text: '访客浏览器分布',
          x: 'center',
          textStyle: {
            fontSize: 14
          }
        },
        tooltip: {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
          orient: 'vertical',
          x: 'left',
          data: ['Chrome', 'Firefox', 'IE 8.0', 'Safari', '其它浏览器']
        },
        series: [{
          name: '访问来源',
          type: 'pie',
          radius: '55%',
          center: ['50%', '50%'],
          data: [
            { value: 9052, name: 'Chrome' },
            { value: 1610, name: 'Firefox' },
            { value: 3200, name: 'IE 8.0' },
            { value: 535, name: 'Safari' },
            { value: 1700, name: '其它浏览器' }
          ]
        }]
      },

      //新增的用户量
      {
        title: {
          text: '最近一周新增的用户量',
          x: 'center',
          textStyle: {
            fontSize: 14
          }
        },
        tooltip: { //提示框
          trigger: 'axis',
          formatter: "{b}<br>新增用户：{c}"
        },
        xAxis: [{ //X轴
          type: 'category',
          data: ['11-07', '11-08', '11-09', '11-10', '11-11', '11-12', '11-13']
        }],
        yAxis: [{  //Y轴
          type: 'value'
        }],
        series: [{ //内容
          type: 'line',
          data: [200, 300, 400, 610, 150, 270, 380],
        }]
      }
    ]
      , elemDataView = $('#LAY-index-dataview').children('div')
      , renderDataView = function (index) {
        echartsApp[index] = echarts.init(elemDataView[index], layui.echartsTheme);
        echartsApp[index].setOption(options[index]);
        //window.onresize = echartsApp[index].resize;
        admin.resize(function () {
          echartsApp[index].resize();
          control.resize();
         // other.resize();
        });
      };


    //没找到DOM，终止执行
    if (!elemDataView[0]) return;

    renderDataView(0);

    //监听数据概览轮播
    var carouselIndex = 0;
    carousel.on('change(LAY-index-dataview)', function (obj) {
      renderDataView(carouselIndex = obj.index);
    });

    //监听侧边伸缩
    layui.admin.on('side', function () {
      setTimeout(function () {
        renderDataView(carouselIndex);
      }, 300);
    });

    //监听路由
    layui.admin.on('hash(tab)', function () {
      layui.router().path.join('') || renderDataView(carouselIndex);
    });
  });

</script>

